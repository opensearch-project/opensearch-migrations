# Multiple independent sourceâ†’target migration pairs
kafkaClusterConfiguration:
  default:
    autoCreate: {}

sourceClusters:
  sourceA:
    endpoint: "https://elasticsearch-master-headless:9200"
    allowInsecure: true
    version: "ES 7.10"
    authConfig:
      basic:
        secretName: "source-creds"
    snapshotInfo:
      repos:
        repoA:
          awsRegion: "us-east-2"
          endpoint: "http://10.99.62.203:4566"
          s3RepoPathUri: "s3://migrations-default-123456789012-dev-us-east-2"
      snapshots:
        snapA:
          config:
            createSnapshotConfig: {}
            requiredForCompleteMigration: true
          repoName: "repoA"

  sourceB:
    endpoint: "https://elasticsearch-master-headless:9200"
    allowInsecure: true
    version: "ES 7.10"
    authConfig:
      basic:
        secretName: "source-creds"
    snapshotInfo:
      repos:
        repoB:
          awsRegion: "us-east-2"
          endpoint: "http://10.99.62.203:4566"
          s3RepoPathUri: "s3://bucket-b"
      snapshots:
        snapB:
          config:
            createSnapshotConfig:
              indexAllowlist:
                - "index-*"
            requiredForCompleteMigration: true
          repoName: "repoB"

targetClusters:
  targetX:
    endpoint: "https://opensearch-cluster-master-headless:9200"
    allowInsecure: true
    version: "OS 2.11"
    authConfig:
      basic:
        secretName: "target-creds"
  targetY:
    endpoint: "https://opensearch-y:9200"
    allowInsecure: true
    version: "OS 2.11"
    authConfig:
      basic:
        secretName: "target-creds"

snapshotMigrationConfigs:
  - fromSource: "sourceA"
    toTarget: "targetX"
    perSnapshotConfig:
      snapA:
        - metadataMigrationConfig: {}
  - fromSource: "sourceB"
    toTarget: "targetY"
    perSnapshotConfig:
      snapB:
        - documentBackfillConfig: {}

traffic:
  proxies:
    proxyA:
      source: "sourceA"
      proxyConfig:
        listenPort: 9201
    proxyB:
      source: "sourceB"
      proxyConfig:
        listenPort: 9202
  replayers:
    replayA:
      fromProxy: "proxyA"
      toTarget: "targetX"
    replayB:
      fromProxy: "proxyB"
      toTarget: "targetY"
