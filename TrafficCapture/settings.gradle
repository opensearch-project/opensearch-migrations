/*
 * This file was generated by the Gradle 'init' task.
 *
 * The settings file is used to specify which projects to include in your build.
 *
 * Detailed information about configuring a multi-project build in Gradle can be found
 * in the user manual at https://docs.gradle.org/8.0.2/userguide/multi_project_builds.html
 */

void addSubProjects(String path, File dir) {
    if (dir.isDirectory() == false) return;
    if (dir.name == 'buildSrc') return;
    if (new File(dir, 'build.gradle').exists() == false) return;
    if (findProject(dir) != null) return;

    final String projectName = "${path}:${dir.name}"
    include projectName
    if (path.isEmpty() || path.startsWith(':example-plugins')) {
        project(projectName).projectDir = dir
    }
    for (File subdir : dir.listFiles()) {
        addSubProjects(projectName, subdir)
    }
}

rootProject.name = 'TrafficCapture'
include('captureKafkaOffloader',
        'captureOffloader',
        'captureProtobufs',
        'coreUtilities',
        'nettyWireLogging',
        'trafficCaptureProxyServer',
        'trafficReplayer',
        'testUtilities',
        'dockerSolution',
        'trafficCaptureProxyServerTest'
)

addSubProjects('', new File(rootProject.projectDir,'replayerPlugins'))
include 'replayerPlugins:jsonMessageTransformers:jsonJoltMessageTransformerProvider:untitled'
findProject(':replayerPlugins:jsonMessageTransformers:jsonJoltMessageTransformerProvider:untitled')?.name = 'untitled'

// Enable Gradle Scan Publishing for CI/CD
if (System.getenv().containsKey("CI")) {
    gradleEnterprise {
        buildScan {
            termsOfServiceUrl = "https://gradle.com/terms-of-service"
            termsOfServiceAgree = "yes"
            tag("CI")
        }
    }
}
